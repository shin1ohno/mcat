name: CI

on:
  push:
    branches: [master]
  pull_request:
    branches: [master]

jobs:
  test:
    runs-on: macos-15
    steps:
      - uses: actions/checkout@v4
      - name: Select Xcode 26
        run: sudo xcode-select -s /Applications/Xcode_26.2.0.app
      - name: Build
        run: >
          xcodebuild build-for-testing
          -project MCat/MCat.xcodeproj
          -scheme MCat
          -destination 'platform=macOS'
          CODE_SIGN_IDENTITY=-
          CODE_SIGNING_REQUIRED=NO
          CODE_SIGNING_ALLOWED=NO
      - name: Test
        run: >
          xcodebuild test-without-building
          -project MCat/MCat.xcodeproj
          -scheme MCat
          -destination 'platform=macOS'
          -only-testing:MCatTests
